<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <template id="midardir_layout" inherit_id="website.layout" name="Midardir Layout" primary="True">
            <xpath expr="//div[@id='top_menu_collapse']" position="attributes">
                <attribute name="class">d-none</attribute>
            </xpath>
        </template>
    </data>
    <template id="midardir_cat_res_contacts" name="MidarDir Responsibility">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?token=%s&amp;search=%s' % (token,search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="record.id_code"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <section class="s_text_block pt32 pb32" data-name="Text block">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 pt32 pb32">
                            <p class="lead">
                                <br/>
                            </p>
                            <div class="card">
                                <img class="card-image-top" src="https://live.staticflickr.com/65535/51193848084_000412f583_c_d.jpg" style=""/>
                                <img class="rounded-circle border-white" alt="Avatar" t-attf-src="/web/image/res.partner/#{record.id}/image_1920/100x100"
                                     style="margin-left: 20px; margin-top: -50px; width: 100px; border-style: solid; border-width: thick;"/>
                                <div class="card-body">
                                    <h2 class="card-title">
                                        <t t-esc="record.name"/>
                                    </h2>
                                    <h5 class="card-subtitle">
                                        <t t-esc="record.function"/>
                                    </h5>
                                    <a t-att-href="'mailto:%s' % record.email">
                                        <t t-esc="record.email"/>
                                    </a>
                                    <br/>
                                    <a t-att-href="'tel:%s' % record.phone">
                                        <t t-esc="record.phone"/>
                                    </a>
                                    <br/>
                                    <a t-att-href="'tel:%s' % record.mobile">
                                        <t t-esc="record.mobile"/>
                                    </a>
                                    <br/>
                                    <span><t t-esc="record.street"/>,
                                        <t t-esc="record.zip"/>
                                        <t t-esc="record.city"/>
                                    </span>
                                    <br/>
                                    <t t-esc="lang_name"/>
                                </div>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <h3 class="list-group-item-heading">
                                            Responsibilities
                                        </h3>
                                    </li>
                                    <li class="list-group-item" style="display: inline-flex;">
                                        <t t-foreach="partners" t-as="part">
                                            <li class="list-group-item row d-flex px-0">
                                                <div class="col-3">
                                                    <img class="rounded-circle" alt="Avatar" t-attf-src="/web/image/res.partner/#{part.id}/image_1920/100x100"
                                                         style="height: 80px; width: 80px; border-style: solid; border-width: thin;"/>

                                                </div>
                                                <div class="col-9 align-self-center">
                                                    <a t-att-href="'/midardir/contact/%s?token=%s&amp;search=%s&amp;parent=%s' % (token,part.id,search,part.name)">
                                                        <t t-esc="part.name"/>
                                                        <t t-esc="part.function"/>
                                                    </a>
                                                </div>
                                            </li>
                                        </t>
                                    </li>
                                </ul>
                            </div>
                            <p class="lead">
                                <br/>
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </t>
    </template>

    <template id="midardir_social_group" name="MidarDir Social Group">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6" style="padding: 0;">
                            <ol class="breadcrumb mt8">
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/midardir?token=%s&amp;search=%s' % (token,search)">
                                        <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                    </a>
                                </li>
                                <li t-if="parent" class="breadcrumb-item">
                                    <a t-att-href="'%s' % (prevpath)">
                                        <t t-esc="parent"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <t t-esc="record.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <section class="s_text_block pt32 pb32" data-name="Text block">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 pt32 pb32">
                                <p class="lead">
                                    <br/>
                                </p>
                                <div class="card">
                                    <img class="card-image-top" src="https://live.staticflickr.com/65535/51193848084_000412f583_c_d.jpg" style=""/>
                                    <img class="rounded-circle border-white" alt="Avatar" t-attf-src="/web/image/social.partner.group/#{record.id}/image_1920/100x100"
                                         style="margin-left: 20px; margin-top: -50px; width: 100px; border-style: solid; border-width: thick;"/>
                                    <div class="card-body">
                                        <h2 class="card-title">
                                            <t t-esc="record.name"/>

                                        </h2>

                                        <div style="display:inline-flex;">
                                            <div class="social_group_hierarchy"></div>
                                            <a t-att-href="'/social_group_hierarchy?token=%s&amp;social_group_id=%s&amp;search=%s' % (token,record.id,search)" class="btn btn-primary ml-4" style="height:10%;">Show
                                                Graphical Hierarchy
                                            </a>
                                        </div>
                                        <h3 class="card-title">Teamleiter/in</h3>

                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item row d-flex px-0">
                                                <div class="col-3">
                                                    <img class="rounded-circle" alt="Avatar" t-attf-src="/web/image/res.partner/#{record.group_owner_id}/image_1920/100x100"
                                                         style="max-height: 80px; width: 80px; border-style: solid; border-width: thin;"/>

                                                </div>
                                                <div class="col-9">
                                                    <a t-att-href="'/midardir/contact/%s?token=%s&amp;search=%s' % (record.group_owner_id.id,token,search)">
                                                        <t t-esc="record.group_owner_id.name"/>
                                                    </a>
                                                    <br/>
                                                    <t t-esc="record.group_owner_id.function"/>
                                                </div>
                                            </li>
                                        </ul>
                                        <br/>
                                        <h3 class="card-title">Teammitglieder (<t t-esc="len(record.partner_ids)"/>)
                                        </h3>
                                        <ul class="list-group list-group-flush">
                                            <t t-foreach="record.partner_ids" t-as="part">
                                                <li class="list-group-item row d-flex px-0">
                                                    <div class="col-3">
                                                        <img class="rounded-circle" alt="Avatar" t-attf-src="/web/image/res.partner/#{part.id}/image_1920/100x100"
                                                             style="height: 80px; width: 80px; border-style: solid; border-width: thin;"/>

                                                    </div>
                                                    <div class="col-9 align-self-center">
                                                        <a t-att-href="'/midardir/contact/%s?token=%s&amp;search=%s&amp;parent=%s' % (part.id,token,search,record.name)">
                                                            <t t-esc="part.name"/>
                                                        </a>
                                                        <br/>
                                                        <t t-esc="part.function"/>
                                                    </div>
                                                </li>
                                            </t>
                                        </ul>

                                        <input type="hidden" name="social_group_id" t-att-value="record.id"/>
                                        <input type="hidden" name="social_group_search" t-att-value="search"/>
                                        <input type="hidden" name="token" t-att-value="token"/>
                                    </div>

                                </div>
                                <p class="lead">
                                    <br/>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <template id="midardir_social_group_heirarchical_view" name="MidarDir Social Group Hierarchy">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6 d-none d-md-block" style="padding: 0;">
                            <ol class="breadcrumb mt8">
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/midardir?token=%s&amp;search=%s' % (token,search)">
                                        <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                    </a>
                                </li>
                                <li t-if="parent" class="breadcrumb-item">
                                    <a t-att-href="'%s' % (prevpath)">
                                        <t t-esc="parent"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <t t-esc="record.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <center>
                    <h2>
                        <p style="margin: 0px;" id="group_name"><t t-esc="record.name"/></p>
                    </h2>
                    <h4>
                        <p style="margin: 0px;" id="leadership_name">Leadership: <t t-esc="record.group_owner_id.name"/></p>
                        <p style="margin: 0px;" id="headcount_direct">Headcount Direct: <t t-esc="record.current_subscribers_count"/></p>
                        <p style="margin: 0px;" id="headcount_total">Headcount Total: <t t-esc="record.current_and_childs_subscribers_count"/></p>
                    </h4>
                    <t t-if="parent_sc_group">
                        <a role='button' class='btn btn-primary' t-att-href="'/social_group_hierarchy?token=%s&amp;social_group_id=%s&amp;search=%s' % (token,parent_sc_group.id,search)">Upper Level</a>
                    </t>
                </center>
<!--                <div id="chart-container" t-att-group-id="social_group_id"></div>-->
                <br/>
                <div class="oe_structure">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-8 offset-md-2 col-12">
                                <figure class="highcharts-figure">
                                    <div id="sunburst-container" style="height:50%;" t-att-group-id="social_group_id" t-att-token="token"/>
                                </figure>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="midardir_contact" name="MidarDir Contact">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6" style="padding: 0;">
                            <ol class="breadcrumb mt8">
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/midardir?token=%s&amp;search=%s' % (token,search)">
                                        <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                    </a>
                                </li>
                                <li t-if="parent" class="breadcrumb-item">
                                    <a t-att-href="'%s' % (prevpath)">
                                        <t t-esc="parent"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <t t-esc="record.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <section class="s_text_block pt32 pb32" data-name="Text block">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 pt32 pb32">
                                <p class="lead">
                                    <br/>
                                </p>
                                <div class="card">
                                    <img class="card-image-top" src="https://live.staticflickr.com/65535/51193848084_000412f583_c_d.jpg" style=""/>
                                    <img class="rounded-circle border-white" alt="Avatar" t-attf-src="/web/image/res.partner/#{record.id}/image_1920/100x100"
                                         style="margin-left: 20px; margin-top: -50px; width: 100px; border-style: solid; border-width: thick;"/>
                                    <div class="card-body">
                                        <h2 class="card-title">
                                            <t t-esc="record.name"/>
                                        </h2>
                                        <h5 class="card-subtitle">
                                            <t t-esc="record.function"/>
                                        </h5>
                                        <a t-att-href="'mailto:%s' % record.email">
                                            <t t-esc="record.email"/>
                                        </a>
                                        <br/>
                                        <a t-att-href="'tel:%s' % record.phone">
                                            <t t-esc="record.phone"/>
                                        </a>
                                        <br/>
                                        <a t-att-href="'tel:%s' % record.mobile">
                                            <t t-esc="record.mobile"/>
                                        </a>
                                        <br/>
                                        <span><t t-esc="record.street"/>,
                                            <t t-esc="record.zip"/>
                                            <t t-esc="record.city"/>
                                        </span>
                                        <br/>
                                        <t t-esc="lang_name"/>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <t t-foreach="org_data_latest" t-as="org_data">
                                            <li class="list-group-item">
                                                <h3 class="list-group-item-heading">
                                                    <t t-esc="org_data.get('name')"/>
                                                </h3>
                                            </li>
                                            <li class="list-group-item">
                                                <t t-foreach="org_data.get('data')" t-as="org_line">
                                                    <a t-att-href="'/midardir/socialgroup/%s?token=%s&amp;search=%s&amp;parent=%s' % (org_line.get('id'),token,search,org_line.get('current_group'))">
                                                        <t t-esc="org_line.get('current_group')"/>
                                                    </a>
                                                </t>
                                            </li>
                                        </t>
                                    </ul>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <h3 class="list-group-item-heading">
                                                Responsibilities
                                            </h3>
                                        </li>
                                        <li class="list-group-item" style="display: inline-flex;">
                                            <t t-foreach="responsbility" t-as="resp">
                                                <li class="list-group-item row d-flex px-0">
                                                    <div class="col-3">
                                                        <img class="rounded-circle" alt="Avatar" t-att-src="resp.get('image_url')"
                                                             style="height: 80px; width: 80px; border-style: solid; border-width: thin;"/>

                                                    </div>
                                                    <div class="col-9 align-self-center">
                                                        <a t-att-href="'/midardir/res/contact/%s?token=%s&amp;search=%s&amp;parent=%s' % (resp.get('id'),token,search,resp.get('name'))">
                                                            <t t-esc="resp.get('name')"/>
                                                            <t t-esc="resp.get('name')"/>
                                                        </a>
                                                    </div>
                                                </li>

                                            </t>
                                        </li>
                                    </ul>
                                </div>
                                <p class="lead">
                                    <br/>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>


    <template id="midardir_post" name="MidarDir Post">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?token=%s&amp;search=%s' % (token,search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="name"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <table class="table w-50" style="background-color: lightgrey;">
                        <tbody>
                            <tr>
                                <td colspan="2" class="btn-primary">
                                    <span>
                                        <strong>
                                            <t t-esc="name"/>
                                        </strong>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Date:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="date"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Message:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="message"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Likes:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_like_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Dislikes:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_dislike_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Comments:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_comment_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Share:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_share_count"/>
                                    </span>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>


    <template id="midardir_search_main_menu" name="Midardir Social Groups">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <t t-set="additional_title">MidarDir</t>
                    <form t-att-action="'/midardir'" method="get">
                        <div t-attf-class="input-group #{_classes}" role="search">
                            <input type="text" name="search" class="search-query form-control oe_search_box"
                                   placeholder="Search..." t-att-value="search"/>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search"
                                        title="Search">
                                    <i class="fa fa-search"/>
                                </button>
                                <t t-call="website_language_flag_cr.language_flags"/>
                            </div>
                        </div>
                        <input type="hidden" name="token" t-att-value="token"/>
                    </form>
                </div>
                <t t-if="not search">
                    <div>
                        <img src="/dcm_customization/static/description/search_1.png" style="width:200px;" class="img img-fluid"/>
                    </div>

                    <div>
                        <span>
                            <strong>Seek and you shall find.</strong>
                        </span>
                        <br/>
                        <span>Find persons, organisation units, posts,</span>
                        <br/>
                        <span>responsibilities, and more in one go</span>
                    </div>
                </t>

                <t t-if="search and not records.get('data')">
                    <div>
                        <img src="/dcm_customization/static/description/search_2.png" style="width:200px;" class="img img-fluid"/>
                    </div>

                    <div>
                        <span>
                            <strong>No data found</strong>
                        </span>
                        <br/>
                        <span>Donâ€™t worry, try again</span>
                        <br/>
                    </div>
                </t>
                <br/>
                <div class="row" style="width: 80%;">
                    <t t-foreach="records.get('data')" t-as="record">
                        <div class="col-12 midardir_social_group_menu">
                            <a t-att-href="'/midardir/result?token=%s&amp;search=%s&amp;config=%s'%(token,search,record.get('id'))">
                                <img t-att-src="record.get('image')" class="img img-fluid midardir-img rounded-circle"/>
                                <span t-esc="record.get('count')"/>
                                <span t-esc="record.get('name')"/>
                                found
                            </a>
                        </div>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <template id="midardir_search_menu_result" name="MidarDir Global Search Result">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <t t-set="additional_title">MidarDir</t>
                    <form t-att-action="'/midardir'" method="get">
                        <div t-attf-class="input-group #{_classes}" role="search">
                            <input type="text" name="search" class="search-query form-control oe_search_box" placeholder="Search..." t-att-value="search"/>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search" title="Search">
                                    <i class="fa fa-search"/>
                                </button>
                            </div>
                        </div>
                        <input type="hidden" name="token" t-att-value="token"/>
                    </form>
                </div>
                <br/>
                <div class="row" style="width: 100%;">

                    <t t-foreach="records.get('data')" t-as="record">
                        <div t-att-class="'col-12 mr-1 mb-2 midardir_social_group_menu active' if current_config == record.get('id') else 'col-12 mr-1 mb-2 midardir_social_group_menu'"
                             style="opacity: 0.5">
                            <a t-att-href="'/midardir/result?token=%s&amp;search=%s&amp;config=%s'%(token,search,record.get('id'))">
                                <img t-att-src="record.get('image')" class="img img-fluid midardir-img rounded-circle"/>
                                <span t-esc="record.get('count')"/>
                                <span t-esc="record.get('name')"/>
                                gefunden

                            </a>
                        </div>
                    </t>

                </div>
                <br/>
                <t t-foreach="records.get('data')" t-as="record">
                    <t t-if="current_config == record.get('id')">
                        <h2 t-esc="record.get('name')"/>
                    </t>
                </t>
                <div class="row">
                    <t t-if="result_fields">
                        <t t-set="r_keys" t-value="result_fields.split(',')"/>
                        <ul class="col-12 list-group list-group-flush">
                            <t t-foreach="results.get(model).get('data')" t-as="result">
                                <t t-set="redirect_url" t-value="'#'"/>
                                <t t-set="r_label_count" t-value="0"/>
                                <t t-set="r_label" t-value="0"/>
                                <t t-foreach="r_keys" t-as="key">
                                    <t t-if="r_label_count == 0">
                                        <t t-set="r_label" t-value="result.get(key)"/>
                                    </t>
                                    <t t-set="r_label_count" t-value="r_label_count+1"/>
                                </t>
                                <t t-if="page == 'profile'">
                                    <t t-set="redirect_url" t-value="'/midardir/contact/%s?token=%s&amp;parent=%s&amp;search=%s'%(result.get('id'),token,r_label,search)"/>
                                </t>
                                <t t-if="page == 'group'">
                                    <t t-set="redirect_url" t-value="'/midardir/socialgroup/%s?token=%s&amp;parent=%s&amp;search=%s'%(result.get('id'),token,r_label,search)"/>
                                </t>
                                <t t-if="page == 'responsbility'">
                                    <t t-set="redirect_url" t-value="'/midardir/res/contact/%s?token=%s&amp;parent=%s&amp;search=%s'%(result.get('id'),token,r_label,search)"/>
                                </t>
                                <t t-if="page == 'post'">
                                    <t t-set="redirect_url" t-value="'/midardir/post/%s?token=%s&amp;parent=%s&amp;search=%s'%(result.get('id'),token,r_label,search)"/>
                                </t>
                                <li class="row list-group-item list-group-item-action d-flex">
                                    <div class="col-3">
                                        <a t-att-href="redirect_url">
                                            <img t-att-src="result.get('image_url')" class="img img-fluid rounded-circle"
                                                 style="max-height: 80px; width: 80px; border-style: solid; border-width: thin;"/>
                                        </a>
                                    </div>
                                    <div class="col-9 self-align-center">
                                        <a t-att-href="redirect_url">
                                            <t t-set="r_count" t-value="0"/>
                                            <t t-foreach="r_keys" t-as="key">
                                                <t t-if="r_count == 0">
                                                    <b>
                                                        <t t-esc="result.get(key)"/>
                                                    </b>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="result.get(key)"/>
                                                </t>
                                                <br/>
                                                <t t-set="r_count" t-value="r_count+1"/>
                                            </t>
                                        </a>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </t>
                </div>
            </div>
        </t>

    </template>

</odoo>
<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="midardir_cat_res_contacts" name="MidarDir Responsibility">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <!--<div class="container clearfix">
                <a t-att-href="'/midardir?search=%s'%(search)" class="btn btn-primary float-left mb32"
                   style="position: relative; overflow: hidden;">
                    <span class="graph-ripple"
                          style="height: 121.717px; width: 121.717px; top: -50.8585px; left: -15.8585px;"/>
                    Back To Search
                </a>
            </div>-->
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?search=%s' % (search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="partner_category.name"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <table class="table w-50" style="background-color: lightgrey;">
                        <tbody>
                            <tr>
                                <td colspan="2" class="btn-primary">
                                    <span>
                                        <strong>
                                            <t t-esc="partner_category.name"/>
                                        </strong>
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Company Details: </span>
                                </td>
                                <td>
                                    <span><strong><t t-esc="partner_category.partner_id.name"/></strong><br/>
<!--                                    <span>Company Email:<t t-esc="partner_category.partner_id.email"/></span><br/>-->
<!--                                    <span>Company Email:<t t-esc="company_id.email"/></span><br/>-->
                                    <div t-field="partner_category.partner_id" t-options='{"widget": "contact", "fields": ["address","email","phone"], "phone_icons": True}'/>
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <table>
                                        <thead>
                                            <tr>
                                                <td>
                                                    <strong>Name:</strong>
                                                </td>
                                                <td>
                                                    <strong>Email:</strong>
                                                </td>
                                            </tr>
                                        </thead>
                                        <t t-foreach="partners" t-as="part">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <a t-att-href="'/midardir/contact/%s?search=%s&amp;parent=%s' % (part.id,search,partner_category.name)">
                                                                <t t-esc="part.name"/>
                                                            </a>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <a t-att-href="'mailto:%s' % part.email">
                                                                <t t-esc="part.email"/>
                                                            </a>
                                                        </span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </t>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>

    <template id="midardir_social_group" name="MidarDir Social Group">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <!--<div class="container clearfix">
                <a t-att-href="'/midardir?search=%s'%(search)" class="btn btn-primary float-left mb32"
                   style="position: relative; overflow: hidden;">
                    <span class="graph-ripple"
                          style="height: 121.717px; width: 121.717px; top: -50.8585px; left: -15.8585px;"/>
                    Back To Search
                </a>
            </div>-->
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?search=%s' % (search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="record.name"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <table class="table w-50" style="background-color: lightgrey;">
                        <tbody>
                            <tr>
                                <td colspan="2" class="btn-primary">
                                    <span>
                                        <strong>
                                            <t t-esc="record.name"/>
                                        </strong>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Code:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="record.code"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Parent(New) Code:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-if="parent_sg_id != False">
                                            <a t-att-href="'/midardir/socialgroup/%s?search=%s' % (parent_sg_id,search)">
                                                <t t-esc="record.parent2_id"/>
                                            </a>
                                        </t>
                                        <t t-if="parent_sg_id == False">
                                            <t t-esc="record.parent2_id"/>
                                        </t>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Contacts:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="record.total_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Contacts:</strong>
                                </td>

                                <td>
                                    <table>
                                        <thead>
                                            <tr>
                                                <td>
                                                    <strong>Name:</strong>
                                                </td>
                                                <td>
                                                    <strong>Email:</strong>
                                                </td>
                                                <td>
                                                    <strong>Responsbility:</strong>
                                                </td>
<!--                                                <td>-->
<!--                                                    <strong>Skills:</strong>-->
<!--                                                </td>-->
                                            </tr>
                                        </thead>
                                        <t t-foreach="record.partner_ids" t-as="part">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <a t-att-href="'/midardir/contact/%s?search=%s&amp;parent=%s' % (part.id,search,record.name)">
                                                                <t t-esc="part.name"/>
                                                            </a>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <a t-att-href="'mailto:%s' % part.email">
                                                                <t t-esc="part.email"/>
                                                            </a>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <t t-if="part.category_res_id_name">
                                                                <t t-foreach="(part.category_res_id_name).split(',')"
                                                                   t-as="cat_res">
                                                                    <a t-att-href="'/midardir/res/contact/%s?search=%s&amp;parent=%s' % (cat_res.split(':')[1],search,record.name)">
                                                                        <span t-esc="cat_res.split(':')[0]"/>
                                                                    </a>
                                                                </t>
                                                            </t>
                                                        </span>
                                                    </td>
<!--                                                    <td>-->
<!--                                                        <span>-->
<!--                                                            <t t-if="part.category_skill_id_name">-->
<!--                                                                <t t-foreach="(part.category_skill_id_name).split(',')"-->
<!--                                                                   t-as="cat_skill">-->
<!--                                                                    <a t-att-href="'/midardir/res/contact/%s?search=%s&amp;parent=%s' % (cat_skill.split(':')[1],search,record.name)">-->
<!--                                                                        <span t-esc="cat_skill.split(':')[0]"/>-->
<!--                                                                    </a>-->
<!--                                                                </t>-->
<!--                                                            </t>-->
<!--                                                        </span>-->
<!--                                                    </td>-->
                                                </tr>
                                            </tbody>
                                        </t>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>

    <template id="midardir_contact" name="MidarDir Contact">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure">
                <section class="s_page_header pt32 pb32" style="background-color: rgb(239, 239, 239);"
                         data-name="Page header">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 s_title pt8 pb16">
                                <h1 class="s_title_default">
                                    <font style="font-size: 62px;">Profil</font>
                                </h1>
                            </div>
                        </div>
                    </div>
                </section>
                <section>
                    <!--<div class="container clearfix">
                        <a t-att-href="'/midardir?search=%s'%(search)" class="btn btn-primary float-left mb32"
                           style="position: relative; overflow: hidden;">
                            <span class="graph-ripple"
                                  style="height: 121.717px; width: 121.717px; top: -50.8585px; left: -15.8585px;"/>
                            Back To Search
                        </a>
                    </div>-->
                </section>
                <div class="container">
                    <div class="row">
                        <div class="col-md-6" style="padding: 0;">
                            <ol class="breadcrumb mt8">
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/midardir?search=%s' % (search)">
                                        <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                    </a>
                                </li>
                                <li t-if="parent" class="breadcrumb-item">
                                    <a t-att-href="'%s' % (prevpath)">
                                        <t t-esc="parent"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <t t-esc="record.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <section class="s_text_block pt32 pb32" data-name="Text block">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 pt32 pb32">
                                <p class="lead">
                                    <br/>
                                </p>
                                <table class="table w-50" style="background-color: lightgrey;">
                                    <tbody>
                                        <tr>
                                            <td colspan="2" class="btn-primary">
                                                <span>
                                                    <strong>
                                                        <t t-esc="record.name"/>
                                                    </strong>
                                                </span>
                                            </td>
                                            <td/>
                                            <td rowspan="3" class="text-right oe-avatar">
                                                <img class="rounded-circle" alt="Avatar"
                                                     t-attf-src="/web/image/res.partner/#{record.id}/image_1920/100x100"/>
                                            </td>
                                        </tr>
                                        <tr class="">
                                            <td>
                                                <strong>Anrede:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="record.title.name"/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Email:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="record.email"/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Telefon:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="record.phone"/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Mobil:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="record.mobile"/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Dienstadresse:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="record.street"/>,
                                                    <t t-esc="record.zip"/>
                                                    <t t-esc="record.city"/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Sprache:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="lang_name"/>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <br/>
                                            </td>
                                            <td>
                                                <br/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Organisationseinheit 1:</strong>
                                            </td>
                                            <td>
                                                <a t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_1.get('id'),search,record.name)">
                                                    <t t-if="level_1.get('name')">
                                                        <t t-esc="level_1['name']"/>
                                                        (<t t-esc="level_1['code']"/>)
                                                    </t>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Organisationseinheit 2:</strong>
                                            </td>
                                            <td>
                                                <a t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_2.get('id'),search,record.name)">
                                                    <t t-if="level_2.get('name')">
                                                        <t t-esc="level_2['name']"/>
                                                        (<t t-esc="level_2['code']"/>)
                                                    </t>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Organisationseinheit 3:</strong>
                                            </td>
                                            <td>
                                                <a t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_3.get('id'),search,record.name)">
                                                    <t t-if="level_3.get('name')">
                                                        <t t-esc="level_3['name']"/>
                                                        (<t t-esc="level_3['code']"/>)
                                                    </t>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <br/>
                                            </td>
                                            <td>
                                                <br/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong>Funktion:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-esc="record.function"/>
                                                </span>
                                            </td>
                                        </tr>
<!--                                        <tr>-->
<!--                                            <td>-->
<!--                                                <strong>Fachliche Kompetenzen:</strong>-->
<!--                                            </td>-->
<!--                                            <td>-->
<!--                                                <span>-->
<!--                                                    <t t-if="record.category_skill_id_name">-->
<!--                                                        <t t-foreach="record['category_skill_id_name'].split(',')"-->
<!--                                                           t-as="cat_skill">-->
<!--                                                            <a t-att-href="'/midardir/res/contact/%s?search=%s&amp;parent=%s' % (cat_skill.split(':')[1],search,record.name)">-->
<!--                                                                ,-->
<!--                                                                <span t-esc="cat_skill.split(':')[0]"/>-->
<!--                                                            </a>-->
<!--                                                        </t>-->
<!--                                                    </t>-->
<!--                                                </span>-->
<!--                                            </td>-->
<!--                                        </tr>-->
                                        <tr>
                                            <td>
                                                <strong>Zuständigkeiten:</strong>
                                            </td>
                                            <td>
                                                <span>
                                                    <t t-if="record.category_res_id_name">
                                                        <t t-foreach="record['category_res_id_name'].split(',')"
                                                           t-as="cat_res">
                                                            <a t-att-href="'/midardir/res/contact/%s?search=%s&amp;parent=%s' % (cat_res.split(':')[1],search,record.name)">
                                                                <span t-esc="cat_res.split(':')[0]"/>
                                                            </a>
                                                        </t>
                                                    </t>
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p class="lead">
                                    <br/>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>


    <template id="midardir_post" name="MidarDir Post">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?search=%s' % (search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="name"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <table class="table w-50" style="background-color: lightgrey;">
                        <tbody>
                            <tr>
                                <td colspan="2" class="btn-primary">
                                    <span>
                                        <strong>
                                            <t t-esc="name"/>
                                        </strong>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Date:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="date"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Message:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="message"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Likes:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_like_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Dislikes:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_dislike_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Comments:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_comment_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Share:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_share_count"/>
                                    </span>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>


    <template id="midardir_layout" inherit_id="website.layout" name="Midardir Layout" primary="True">
        <xpath expr="//div[@id='top_menu_collapse']" position="replace">
        </xpath>
    </template>
    
    <template id="midardir_search_main_menu" name="Midardir Social Groups">
    	<t t-call="dcm_customization.midardir_layout">
    		<div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <t t-set="additional_title">MidarDir</t>
                    <form t-att-action="'/midardir'" method="get">
                        <div t-attf-class="input-group #{_classes}" role="search">
                            <input type="text" name="search" class="search-query form-control oe_search_box"
                                   placeholder="Search..." t-att-value="search"/>
                            <div class="input-group-append">
                                    <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search"
                                            title="Search">
                                        <i class="fa fa-search"/>
                                        </button>
                                <t t-call="website_language_flag_cr.language_flags" />
                            </div>
                        </div>
                    </form>
                </div>
                <t t-if="not search">
                <div>
                    <img src="/dcm_customization/static/description/search_1.png" style="width:200px;" class="img img-fluid"/>
                </div>

                <div>
                    <span><strong>Seek and you shall find.</strong></span><br/>
                    <span>Find persons, organisation units, posts, </span><br/>
                    <span>responsibilities, and more in one go</span>
                </div>
                </t>

                <t t-if="search and not records.get('data')">
                <div>
                    <img src="/dcm_customization/static/description/search_2.png" style="width:200px;" class="img img-fluid"/>
                </div>

                <div>
                    <span><strong>No data found</strong></span><br/>
                    <span>Don’t worry, try again</span><br/>
                </div>
                </t>
                <br/>
	    		<div class="row" style="width: 80%;">
	    			<t t-foreach="records.get('data')" t-as="record">
	    				<div class="col-12 midardir_social_group_menu">
	    					<a t-att-href="'/midardir/result?search=%s&amp;config=%s'%(search,record.get('id'))">
	    						<img t-att-src="record.get('image')" class="img img-fluid midardir-img rounded-circle"/>
    							<span t-esc="record.get('count')"/> <span t-esc="record.get('name')"/> found
	    					</a>
	    				</div>
	    			</t>
	    		</div>
            </div>
    	</t>
    </template>
    
    <template id="midardir_search_menu_result" name="MidarDir Global Search Result">
    	<t t-call="dcm_customization.midardir_layout">
    		<div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <t t-set="additional_title">MidarDir</t>
                    <form t-att-action="'/midardir'" method="get">
                        <div t-attf-class="input-group #{_classes}" role="search">
                            <input type="text" name="search" class="search-query form-control oe_search_box"
                                   placeholder="Search..." t-att-value="search"/>
                            <div class="input-group-append">
                                    <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search"
                                            title="Search">
                                        <i class="fa fa-search"/>
                                        </button>
                            </div>
                        </div>
                    </form>
                </div>
                <br/>
	    		<div class="row" style="width: 80%;">
	    			<t t-foreach="records.get('data')" t-as="record">
	    				<div t-att-class="'col-12 mr-1 mb-2 midardir_social_group_menu active' if current_config == record.get('id') else 'col-12 mr-1 mb-2 midardir_social_group_menu'">
	    					<a t-att-href="'/midardir/result?search=%s&amp;config=%s'%(search,record.get('id'))">
	    						<img t-att-src="record.get('image')" class="img img-fluid midardir-img rounded-circle"/>
    							<span t-esc="record.get('count')"/> <span t-esc="record.get('name')"/> found
	    					</a>
	    				</div>
	    			</t>
	    		</div>
	    		<br/>
	    		<div class="row" style="height:50vh;overflow:auto;">
	    			<t t-if="result_fields">
	    				<t t-set="r_keys" t-value="result_fields.split(',')"/>
	    				<div class="list-group" style="width:100%;">
                            <span><t t-esc="results.get(model).get('header')"/></span>
	    				<t t-foreach="results.get(model).get('data')" t-as="result">
	    					<t t-set="redirect_url" t-value="'#'"/>
	    					<t t-set="r_label_count" t-value="0"/>
	    					<t t-set="r_label" t-value="0"/>
							<t t-foreach="r_keys" t-as="key">
								<t t-if="r_label_count == 0">
									<t t-set="r_label" t-value="result.get(key)"/>
								</t>
								<t t-set="r_label_count" t-value="r_label_count+1"/>
							</t>
	    					
	    					<t t-if="page == 'profile'">
	    						<t t-set="redirect_url" t-value="'/midardir/contact/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
	    					</t>
	    					<t t-if="page == 'post'">
	    						<t t-set="redirect_url" t-value="'/midardir/post/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
	    					</t>
	    					<t t-if="page == 'group'">
	    						<t t-set="redirect_url" t-value="'/midardir/socialgroup/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
	    					</t>
	    					
	    					<t t-if="page == 'responsibility'">
	    						<t t-set="redirect_url" t-value="'/midardir/res/contact/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
	    					</t>
	   						<a t-att-href="redirect_url" class="row list-group-item list-group-item-action" style="display:flex;">
	   							<div class="col-2">
	   								<img t-att-src="result.get('image_url')" class="img img-fluid rounded-circle" style="width:5rem;"/>
  								</div>
  								<div class="col-10">
  									<t t-set="r_count" t-value="0"/>
	  								<t t-foreach="r_keys" t-as="key">
	  									<t t-if="r_count == 0">
	  										<b><span t-esc="result.get(key)"/></b>
	  									</t>
	  									<t t-else="">
	  										<span t-esc="result.get(key)"/>
	  									</t>
	  									<br/>
	  									<t t-set="r_count" t-value="r_count+1"/>
	  								</t>
  								</div>
	   						</a>
   						</t>
   						</div>
	    			</t>
	    		</div>
            </div>
    	</t>
    </template>

</odoo>
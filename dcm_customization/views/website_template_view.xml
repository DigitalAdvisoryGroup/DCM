<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <template id="midardir_layout" inherit_id="website.layout" name="Midardir Layout" primary="True">
            <xpath expr="//div[@id='top_menu_collapse']" position="attributes">
                <attribute name="class">d-none</attribute>
            </xpath>
        </template>
    </data>
    <template id="midardir_cat_res_contacts" name="MidarDir Responsibility">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?search=%s' % (search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="record.id_code"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <table class="table w-50" style="background-color: lightgrey;">
                        <tbody>
                            <tr>
                                <td colspan="2" class="btn-primary">
                                    <span>
                                        <strong>
                                            <t t-esc="record.name"/>
                                        </strong>
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span>Company Details:</span>
                                </td>
                                <td>
                                    <span>
                                        <strong>
                                            <t t-esc="record.name"/>
                                        </strong>
                                        <br/>
                                                                            <span><t t-esc="record.email"/></span><br/>
                                                                            <span><t t-esc="record.phone"/></span><br/>
<!--                                        <div t-field="record" t-options='{"widget": "contact", "fields": ["address","email","phone"], "phone_icons": True}'/>-->
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <table>
                                        <thead>
                                            <tr>
                                                <td>
                                                    <strong>Name:</strong>
                                                </td>
                                                <td>
                                                    <strong>Email:</strong>
                                                </td>
                                            </tr>
                                        </thead>
                                        <t t-foreach="partners" t-as="part">
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <span>
                                                            <a t-att-href="'/midardir/contact/%s?search=%s&amp;parent=%s' % (part.id,search,record.id_code)">
                                                                <t t-esc="part.name"/>
                                                            </a>
                                                        </span>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <a t-att-href="'mailto:%s' % part.email">
                                                                <t t-esc="part.email"/>
                                                            </a>
                                                        </span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </t>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>

    <template id="midardir_social_group" name="MidarDir Social Group">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6" style="padding: 0;">
                            <ol class="breadcrumb mt8">
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/midardir?search=%s' % (search)">
                                        <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                    </a>
                                </li>
                                <li t-if="parent" class="breadcrumb-item">
                                    <a t-att-href="'%s' % (prevpath)">
                                        <t t-esc="parent"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <t t-esc="record.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <section class="s_text_block pt32 pb32" data-name="Text block">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 pt32 pb32">
                                <p class="lead">
                                    <br/>
                                </p>
                                <div class="card">
                                    <img class="card-image-top" src="https://live.staticflickr.com/65535/51193848084_000412f583_c_d.jpg" style=""/>
                                    <img class="rounded-circle border-white" alt="Avatar" t-attf-src="/web/image/social.partner.group/#{record.id}/image_1920/100x100"
                                         style="margin-left: 20px; margin-top: -50px; width: 100px; border-style: solid; border-width: thick;"/>
                                    <div class="card-body">
                                        <h2 class="card-title">
                                            <t t-esc="record.name"/>
                                        </h2>
                                        <h3 class="card-title">Teamleiter/in</h3>
                                        <a t-att-href="'/social_group_hierarchy?social_group_id=%s' % (record.id)" class="btn btn-primary"> Show Heirarchy</a>
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item row d-flex px-0">
                                                <div class="col-3">
                                                    <img class="rounded-circle" alt="Avatar" t-attf-src="/web/image/res.partner/#{record.group_owner_id}/image_1920/100x100"
                                                         style="max-height: 80px; width: 80px; border-style: solid; border-width: thin;"/>

                                                </div>
                                                <div class="col-9">
                                                    <a t-att-href="'/midardir/contact/%s?search=%s' % (record.group_owner_id.id,search)">
                                                        <t t-esc="record.group_owner_id.name"/>
                                                    </a>
                                                    <br/>
                                                    <t t-esc="record.group_owner_id.function"/>
                                                </div>
                                            </li>
                                        </ul>
                                        <br/>
                                        <h3 class="card-title">Teammitglieder</h3>
                                        <ul class="list-group list-group-flush">
                                            <t t-foreach="record.partner_ids" t-as="part">
                                                <li class="list-group-item row d-flex px-0">
                                                    <div class="col-3">
                                                        <img class="rounded-circle" alt="Avatar" t-attf-src="/web/image/res.partner/#{part.id}/image_1920/100x100"
                                                             style="height: 80px; width: 80px; border-style: solid; border-width: thin;"/>

                                                    </div>
                                                    <div class="col-9 align-self-center">
                                                        <a t-att-href="'/midardir/contact/%s?search=%s&amp;parent=%s' % (part.id,search,record.name)">
                                                            <t t-esc="part.name"/>
                                                        </a>
                                                        <br/>
                                                        <t t-esc="part.function"/>
                                                    </div>
                                                </li>
                                            </t>
                                        </ul>
                                    </div>

                                </div>
                                <p class="lead">
                                    <br/>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

	 <template id="midardir_social_group_heirarchical_view" name="MidarDir Social Group Hierarchy">
	 	<t t-call="dcm_customization.midardir_layout">
	 		<center><h2><t t-esc="type"/></h2></center>
	 		<div id="chart-container" t-att-group-id="social_group_id"></div>
	 	</t>
	 </template>

    <template id="midardir_contact" name="MidarDir Contact">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6" style="padding: 0;">
                            <ol class="breadcrumb mt8">
                                <li class="breadcrumb-item">
                                    <a t-att-href="'/midardir?search=%s' % (search)">
                                        <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                    </a>
                                </li>
                                <li t-if="parent" class="breadcrumb-item">
                                    <a t-att-href="'%s' % (prevpath)">
                                        <t t-esc="parent"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item active">
                                    <t t-esc="record.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <section class="s_text_block pt32 pb32" data-name="Text block">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 pt32 pb32">
                                <p class="lead">
                                    <br/>
                                </p>
                                <div class="card">
                                    <img class="card-image-top" src="https://live.staticflickr.com/65535/51193848084_000412f583_c_d.jpg" style=""/>
                                    <img class="rounded-circle border-white" alt="Avatar" t-attf-src="/web/image/res.partner/#{record.id}/image_1920/100x100"
                                         style="margin-left: 20px; margin-top: -50px; width: 100px; border-style: solid; border-width: thick;"/>
                                    <div class="card-body">
                                        <h2 class="card-title">
                                            <t t-esc="record.name"/>
                                        </h2>
                                        <h5 class="card-subtitle">
                                            <t t-esc="record.function"/>
                                        </h5>
                                        <a t-att-href="'mailto:%s' % record.email">
                                            <t t-esc="record.email"/>
                                        </a>
                                        <br/>
                                        <a t-att-href="'tel:%s' % record.phone">
                                            <t t-esc="record.phone"/>
                                        </a>
                                        <br/>
                                        <a t-att-href="'tel:%s' % record.mobile">
                                            <t t-esc="record.mobile"/>
                                        </a>
                                        <br/>
                                        <span><t t-esc="record.street"/>,
                                            <t t-esc="record.zip"/>
                                            <t t-esc="record.city"/>
                                        </span>
                                        <br/>
                                        <t t-esc="lang_name"/>
                                    </div>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <h2 class="list-group-item-heading">Linienorganisation</h2>
                                        </li>
                                        <li class="list-group-item">
                                            <a t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_1.get('id'),search,record.name)">
                                                <t t-if="level_1.get('name')">
                                                    <t t-esc="level_1['name']"/>
                                                    <t t-esc="level_1['code']"/>
                                                </t>
                                            </a>
                                            <br/>
                                            <a class="text-indent-4" t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_2.get('id'),search,record.name)">
                                                <t t-if="level_2.get('name')">
                                                    <t t-esc="level_2['name']"/>
                                                    <t t-esc="level_2['code']"/>
                                                </t>
                                            </a>
                                            <br/>
                                            <a class="text-indent-8" t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_3.get('id'),search,record.name)">
                                                <t t-if="level_3.get('name')">
                                                    <t t-esc="level_3['name']"/>
                                                    <t t-esc="level_3['code']"/>
                                                </t>
                                            </a>
                                        </li>

                                    </ul>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <h2 class="list-group-item-heading">Arbeitsorganisation</h2>
                                        </li>
                                        <li class="list-group-item">
                                            <a t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_1.get('id'),search,record.name)">
                                                <t t-if="level_1.get('name')">
                                                    <t t-esc="level_1['name']"/>
                                                    <t t-esc="level_1['code']"/>
                                                </t>
                                            </a>
                                            <br/>
                                            <a class="text-indent-4" t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_2.get('id'),search,record.name)">
                                                <t t-if="level_2.get('name')">
                                                    <t t-esc="level_2['name']"/>
                                                    <t t-esc="level_2['code']"/>
                                                </t>
                                            </a>
                                            <br/>
                                            <a class="text-indent-8" t-att-href="'/midardir/socialgroup/%s?search=%s&amp;parent=%s' % (level_3.get('id'),search,record.name)">
                                                <t t-if="level_3.get('name')">
                                                    <t t-esc="level_3['name']"/>
                                                    <t t-esc="level_3['code']"/>
                                                </t>
                                            </a>
                                        </li>

                                    </ul>
                                </div>
                                <p class="lead">
                                    <br/>
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>


    <template id="midardir_post" name="MidarDir Post">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <div class="col-md-6" style="padding: 0;">
                        <ol class="breadcrumb mt8">
                            <li class="breadcrumb-item">
                                <a t-att-href="'/midardir?search=%s' % (search)">
                                    <i class="fa fa-home" role="img" aria-label="Home" title="Home"/>
                                </a>
                            </li>
                            <li t-if="parent" class="breadcrumb-item">
                                <a t-att-href="'%s' % (prevpath)">
                                    <t t-esc="parent"/>
                                </a>
                            </li>
                            <li class="breadcrumb-item active">
                                <t t-esc="name"/>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <table class="table w-50" style="background-color: lightgrey;">
                        <tbody>
                            <tr>
                                <td colspan="2" class="btn-primary">
                                    <span>
                                        <strong>
                                            <t t-esc="name"/>
                                        </strong>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Date:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="date"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Message:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="message"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Likes:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_like_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Dislikes:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_dislike_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Comments:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_comment_count"/>
                                    </span>
                                </td>
                            </tr>
                            <tr class="">
                                <td>
                                    <strong>Total Share:</strong>
                                </td>
                                <td>
                                    <span>
                                        <t t-esc="total_share_count"/>
                                    </span>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </t>
    </template>


    <template id="midardir_search_main_menu" name="Midardir Social Groups">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <t t-set="additional_title">MidarDir</t>
                    <form t-att-action="'/midardir'" method="get">
                        <div t-attf-class="input-group #{_classes}" role="search">
                            <input type="text" name="search" class="search-query form-control oe_search_box"
                                   placeholder="Search..." t-att-value="search"/>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search"
                                        title="Search">
                                    <i class="fa fa-search"/>
                                </button>
                                <t t-call="website_language_flag_cr.language_flags"/>
                            </div>
                        </div>
                    </form>
                </div>
                <t t-if="not search">
                    <div>
                        <img src="/dcm_customization/static/description/search_1.png" style="width:200px;" class="img img-fluid"/>
                    </div>

                    <div>
                        <span>
                            <strong>Seek and you shall find.</strong>
                        </span>
                        <br/>
                        <span>Find persons, organisation units, posts,</span>
                        <br/>
                        <span>responsibilities, and more in one go</span>
                    </div>
                </t>

                <t t-if="search and not records.get('data')">
                    <div>
                        <img src="/dcm_customization/static/description/search_2.png" style="width:200px;" class="img img-fluid"/>
                    </div>

                    <div>
                        <span>
                            <strong>No data found</strong>
                        </span>
                        <br/>
                        <span>Don’t worry, try again</span>
                        <br/>
                    </div>
                </t>
                <br/>
                <div class="row" style="width: 80%;">
                    <t t-foreach="records.get('data')" t-as="record">
                        <div class="col-12 midardir_social_group_menu">
                            <a t-att-href="'/midardir/result?search=%s&amp;config=%s'%(search,record.get('id'))">
                                <img t-att-src="record.get('image')" class="img img-fluid midardir-img rounded-circle"/>
                                <span t-esc="record.get('count')"/>
                                <span t-esc="record.get('name')"/>
                                found
                            </a>
                        </div>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <template id="midardir_search_menu_result" name="MidarDir Global Search Result">
        <t t-call="dcm_customization.midardir_layout">
            <div class="oe_structure"/>
            <div class="container">
                <div class="row">
                    <t t-set="additional_title">MidarDir</t>
                    <form t-att-action="'/midardir'" method="get">
                        <div t-attf-class="input-group #{_classes}" role="search">
                            <input type="text" name="search" class="search-query form-control oe_search_box" placeholder="Search..." t-att-value="search"/>
                            <div class="input-group-append">
                                <button type="submit" class="btn btn-primary oe_search_button" aria-label="Search" title="Search">
                                    <i class="fa fa-search"/>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <br/>
                <div class="row" style="width: 100%;">

                    <t t-foreach="records.get('data')" t-as="record">
                        <div t-att-class="'col-12 mr-1 mb-2 midardir_social_group_menu active' if current_config == record.get('id') else 'col-12 mr-1 mb-2 midardir_social_group_menu'"
                             style="opacity: 0.5">
                            <a t-att-href="'/midardir/result?search=%s&amp;config=%s'%(search,record.get('id'))">
                                <img t-att-src="record.get('image')" class="img img-fluid midardir-img rounded-circle"/>
                                <span t-esc="record.get('count')"/>
                                <span t-esc="record.get('name')"/>
                                gefunden

                            </a>
                        </div>
                    </t>

                </div>
                <br/>
                <div class="row">
                    <t t-if="result_fields">
                        <t t-set="r_keys" t-value="result_fields.split(',')"/>
                        <ul class="col-12 list-group list-group-flush">
                            <t t-foreach="results.get(model).get('data')" t-as="result">
                                <t t-set="redirect_url" t-value="'#'"/>
                                <t t-set="r_label_count" t-value="0"/>
                                <t t-set="r_label" t-value="0"/>
                                <t t-foreach="r_keys" t-as="key">
                                    <t t-if="r_label_count == 0">
                                        <t t-set="r_label" t-value="result.get(key)"/>
                                    </t>
                                    <t t-set="r_label_count" t-value="r_label_count+1"/>
                                </t>
                                <t t-if="page == 'profile'">
                                    <t t-set="redirect_url" t-value="'/midardir/contact/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
                                </t>
                                <t t-if="page == 'group'">
                                    <t t-set="redirect_url" t-value="'/midardir/socialgroup/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
                                </t>
                                <t t-if="page == 'responsbility'">
                                    <t t-set="redirect_url" t-value="'/midardir/res/contact/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
                                </t>
                                <t t-if="page == 'post'">
                                    <t t-set="redirect_url" t-value="'/midardir/post/%s?parent=%s&amp;search=%s'%(result.get('id'),r_label,search)"/>
                                </t>
                                <li class="row list-group-item list-group-item-action d-flex">
                                    <div class="col-3">
                                        <a t-att-href="redirect_url">
                                            <img t-att-src="result.get('image_url')" class="img img-fluid rounded-circle"
                                                 style="max-height: 80px; width: 80px; border-style: solid; border-width: thin;"/>
                                        </a>
                                    </div>
                                    <div class="col-9 self-align-center">
                                        <a t-att-href="redirect_url">
                                            <t t-set="r_count" t-value="0"/>
                                            <t t-foreach="r_keys" t-as="key">
                                                <t t-if="r_count == 0">
                                                    <b>
                                                        <t t-esc="result.get(key)"/>
                                                    </b>
                                                </t>
                                                <t t-else="">
                                                    <t t-esc="result.get(key)"/>
                                                </t>
                                                <br/>
                                                <t t-set="r_count" t-value="r_count+1"/>
                                            </t>
                                        </a>
                                    </div>
                                </li>
                            </t>
                        </ul>
                    </t>
                </div>
            </div>
        </t>

    </template>

</odoo>
<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
    <record id="view_mail_mass_mailing_form" model="ir.ui.view">
        <field name="name">mailing.mailing.view.form.inherit.bit</field>
        <field name="model">mailing.mailing</field>
        <field name="inherit_id" ref="mass_mailing.view_mail_mass_mailing_form"/>
        <field name="arch" type="xml">
        
            <xpath expr="//label[@for='mailing_model_id']" position="replace">
                <label for="mailing_model_id" string="Recipients" attrs="{'invisible':[('is_social_group','=',True)]}"/>
            </xpath>
            <xpath expr="//field[@name='subject']" position="after">
                <field name="social_groups_id" widget="many2many_tags_open" attrs="{'readonly': [('state', 'in', ('sending', 'done'))]}"/>
                <field name="is_include_all" />
                <field name="is_social_group" invisible="1"/>
            </xpath>
            <xpath expr="//div[@name='mailing_model_id_container']" position="replace" >
                <div name="mailing_model_id_container" attrs="{'invisible':[('is_social_group','=',True)]}">
                    <div class="row">
                        <div class="col-xs-12 col-md-3" >
                            <field name="mailing_model_id" widget="selection" required="True"
                                attrs="{'readonly': [('state', 'in', ('sending', 'done'))]}"/>
                        </div>
                        <div attrs="{'invisible': [('mailing_model_name', '!=', 'mailing.list')]}" class="col-xs-12 col-md-9 pt-1">
                            <label for="contact_list_ids" string="Select mailing lists:" class="oe_edit_only"/>
                            <field name="contact_list_ids" widget="many2many_tags"
                                placeholder="Select mailing lists..." class="oe_inline"
                                attrs="{
                                    'required':[('mailing_model_name','=','mailing.list')],
                                    'readonly': [('state', 'in', ('sending', 'done'))]
                            }"/>
                        </div>
                    </div>

                    <field name="mailing_model_name" invisible="1"/>
                    <field name="mailing_model_real" invisible="1"/>
                    <div attrs="{'invisible': [('mailing_model_name', '=', 'mailing.list')]}">
                        <field name="mailing_domain" widget="domain" options="{'model': 'mailing_model_real'}"
                        attrs="{'readonly': [('state', 'in', ('sending', 'done'))]}"/>
                    </div>
                </div>
            </xpath>
        </field>
    </record>
    
</data>
</odoo>
